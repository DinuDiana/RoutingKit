<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Routing Kit: RoutingKit</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Routing Kit
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title"><a class="el" href="namespaceRoutingKit.html">RoutingKit</a> </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a href="https://travis-ci.org/RoutingKit/RoutingKit"><object type="image/svg+xml" data="https://travis-ci.org/RoutingKit/RoutingKit.svg?branch=master" style="pointer-events: none;">Build Status</object></a></p>
<p><a class="el" href="namespaceRoutingKit.html">RoutingKit</a> is a C++ library that provides advanced route planning functionality. It was developed at <a href="https://www.kit.edu">KIT</a> in the <a href="https://i11www.iti.kit.edu/">group of Prof. Dorothea Wagner</a>. The most prominent component is an index-based data structure called (Customizable) Contraction Hierarchy, that allows to answer shortest path queries within milliseconds or even less on data sets of continental size while keeping the arc weights flexible. Such running times cannot be achieved without indices.</p>
<p>One of the main design goals of <a class="el" href="namespaceRoutingKit.html">RoutingKit</a> is to make recent research results easily accessible to people developing route planning applications. A key element is an interface that is a good compromise between usability and running time performance. For example the following code snippet is enough to build and query a basic index given an <a href="https://www.openstreetmap.org">OSM</a> PBF data export.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;routingkit/osm_simple.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;routingkit/contraction_hierarchy.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;routingkit/inverse_vector.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;routingkit/timer.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;routingkit/geo_position_to_node.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><span class="keyword">using namespace </span><a class="code" href="namespaceRoutingKit.html">RoutingKit</a>;</div>
<div class="line"><span class="keyword">using namespace </span>std;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main(){</div>
<div class="line">    <span class="comment">// Load a car routing graph from OpenStreetMap-based data</span></div>
<div class="line">    <span class="keyword">auto</span> graph = simple_load_osm_car_routing_graph_from_pbf(<span class="stringliteral">&quot;file.pbf&quot;</span>);</div>
<div class="line">    <span class="keyword">auto</span> tail = invert_inverse_vector(graph.first_out);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Build the shortest path index</span></div>
<div class="line">    <span class="keyword">auto</span> ch = <a class="code" href="classRoutingKit_1_1ContractionHierarchy.html#aacccc44dcef8bf7465f41cec43cade80">ContractionHierarchy::build</a>(</div>
<div class="line">        graph.node_count(), </div>
<div class="line">        tail, graph.head, </div>
<div class="line">        graph.travel_time</div>
<div class="line">    );</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Build the index to quickly map latitudes and longitudes</span></div>
<div class="line">    <a class="code" href="classRoutingKit_1_1GeoPositionToNode.html">GeoPositionToNode</a> map_geo_position(graph.latitude, graph.longitude);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Besides the CH itself we need a query object. </span></div>
<div class="line">    <a class="code" href="classRoutingKit_1_1ContractionHierarchyQuery.html">ContractionHierarchyQuery</a> ch_query(ch);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Use the query object to answer queries from stdin to stdout</span></div>
<div class="line">    <span class="keywordtype">float</span> from_latitude, from_longitude, to_latitude, to_longitude;</div>
<div class="line">    <span class="keywordflow">while</span>(cin &gt;&gt; from_latitude &gt;&gt; from_longitude &gt;&gt; to_latitude &gt;&gt; to_longitude){</div>
<div class="line">        <span class="keywordtype">unsigned</span> from = map_geo_position.find_nearest_neighbor_within_radius(from_latitude, from_longitude, 1000).id;</div>
<div class="line">        <span class="keywordflow">if</span>(from == invalid_id){</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;No node within 1000m from source position&quot;</span> &lt;&lt; endl;</div>
<div class="line">            <span class="keywordflow">continue</span>;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordtype">unsigned</span> to = map_geo_position.find_nearest_neighbor_within_radius(to_latitude, to_longitude, 1000).id;</div>
<div class="line">        <span class="keywordflow">if</span>(to == invalid_id){</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;No node within 1000m from target position&quot;</span> &lt;&lt; endl;</div>
<div class="line">            <span class="keywordflow">continue</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordtype">long</span> <span class="keywordtype">long</span> start_time = get_micro_time();</div>
<div class="line">        ch_query.reset().add_source(from).add_target(to).run();</div>
<div class="line">        <span class="keyword">auto</span> distance = ch_query.get_distance();</div>
<div class="line">        <span class="keyword">auto</span> path = ch_query.get_node_path();</div>
<div class="line">        <span class="keywordtype">long</span> <span class="keywordtype">long</span> end_time = get_micro_time();</div>
<div class="line"> </div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;To get from &quot;</span>&lt;&lt; from &lt;&lt; <span class="stringliteral">&quot; to &quot;</span>&lt;&lt; to &lt;&lt; <span class="stringliteral">&quot; one needs &quot;</span> &lt;&lt; distance &lt;&lt; <span class="stringliteral">&quot; milliseconds.&quot;</span> &lt;&lt; endl;</div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;This query was answered in &quot;</span> &lt;&lt; (end_time - start_time) &lt;&lt; <span class="stringliteral">&quot; microseconds.&quot;</span> &lt;&lt; endl;</div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;The path is&quot;</span>;</div>
<div class="line">        <span class="keywordflow">for</span>(<span class="keyword">auto</span> x:path)</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; x;</div>
<div class="line">        cout &lt;&lt; endl;</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><p>You can get OSM PBF exports from various sources. A popular one is <a href="https://download.geofabrik.de/">Geofabrik</a>. Another one is <a href="https://mapzen.com/data/metro-extracts/">Mapzen</a>.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Documentation</h1>
<p>The functions of <a class="el" href="namespaceRoutingKit.html">RoutingKit</a> are made available using different headers. This allows for a fine-grained control over what is made available and what not. The exact headers are available from the documentation. For cases where this fine-grained control is not necessary, <a class="el" href="namespaceRoutingKit.html">RoutingKit</a> provides the <code>&lt;<a class="el" href="all_8h_source.html">routingkit/all.h</a>&gt;</code> header, which includes everything. All functionality is in the <code><a class="el" href="namespaceRoutingKit.html">RoutingKit</a></code> namespace.</p>
<ul>
<li>Setup and Installation</li>
<li>Support Functionality</li>
<li>Contraction Hierarchy</li>
<li>Customizable Contraction Hierarchy</li>
<li>OpenStreetMap Importer</li>
<li>Converting Coordinates to Node ID</li>
</ul>
<h1><a class="anchor" id="autotoc_md2"></a>
Publications</h1>
<p>Please cite the following article if you use our code in a publication:</p>
<ul>
<li>Customizable Contraction Hierarchies. Julian Dibbelt, Ben Strasser, and Dorothea Wagner. ACM Journal of Experimental Algorithmics, 2016.</li>
</ul>
<p>The original CH algorithm was introduced in:</p>
<ul>
<li>Exact Routing in Large Road Networks Using Contraction Hierarchies. Robert Geisberger, Peter Sanders, Dominik Schultes, and Christian Vetter. Transportation Science, 2012. </li>
</ul>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<div class="ttc" id="anamespaceRoutingKit_html"><div class="ttname"><a href="namespaceRoutingKit.html">RoutingKit</a></div><div class="ttdef"><b>Definition:</b> bit_vector.h:11</div></div>
<div class="ttc" id="aclassRoutingKit_1_1ContractionHierarchyQuery_html"><div class="ttname"><a href="classRoutingKit_1_1ContractionHierarchyQuery.html">RoutingKit::ContractionHierarchyQuery</a></div><div class="ttdef"><b>Definition:</b> contraction_hierarchy.h:170</div></div>
<div class="ttc" id="aclassRoutingKit_1_1GeoPositionToNode_html"><div class="ttname"><a href="classRoutingKit_1_1GeoPositionToNode.html">RoutingKit::GeoPositionToNode</a></div><div class="ttdef"><b>Definition:</b> geo_position_to_node.h:10</div></div>
<div class="ttc" id="aclassRoutingKit_1_1ContractionHierarchy_html_aacccc44dcef8bf7465f41cec43cade80"><div class="ttname"><a href="classRoutingKit_1_1ContractionHierarchy.html#aacccc44dcef8bf7465f41cec43cade80">RoutingKit::ContractionHierarchy::build</a></div><div class="ttdeci">static ContractionHierarchy build(unsigned node_count, std::vector&lt; unsigned &gt;tail, std::vector&lt; unsigned &gt;head, std::vector&lt; unsigned &gt;weight, const std::function&lt; void(std::string)&gt; &amp;log_message=std::function&lt; void(std::string)&gt;(), unsigned max_pop_count=default_max_pop_count)</div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
